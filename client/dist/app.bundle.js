(()=>{"use strict";const t=document.getElementById("portfolio").firstElementChild.children[1],e=document.getElementById("slider").firstElementChild,a=document.getElementById("navbar"),n=document.getElementsByTagName("BODY")[0],l=new class{constructor(t){this.url=t}async get(t){const e=await fetch(this.url+t);return await e.json()}async post(t,e=""){const a=await fetch(this.url+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});return await a.json()}async put(t,e){const a=await fetch(this.url+"/"+t,{method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});return await a.json()}async delete(t){return await fetch(this.url+"/"+t,{method:"DELETE"}),"Veri silindi.."}}("http://localhost:5000/api/"),i=new class{constructor(){this.updateEmployeeButton=document.getElementById("update"),this.employeeList=document.getElementById("employees"),this.nameInput=document.getElementById("name"),this.salaryInput=document.getElementById("salary"),this.departmentInput=document.getElementById("department"),this.portfolio=document.getElementById("portfolio"),this.pageSlider=document.getElementById("slider").firstElementChild}addAllAlbumToUI(t){let e="";t.data.forEach((t=>{e+=`\n            <div class="col-lg-6 portfolio-item column" style = "margin-bottom:0px !important; max-height: 500px !important;\n            max-width: auto !important;">\n                <img src="http://localhost:5000/uploads/album/${t.album_images[0]}" class="d-block w-100" style="max-height: 500px;\n                max-width: auto;"alt="...">\n                <h3 class="d-flex justify-content-center mt-3" style = "color:#3D4D6A;"><a style="max-width:30rem;word-wrap:break-word;">${t.title}</a></h3>\n            </div>\n            `})),this.portfolio.children[0].children[1].innerHTML=e}addAlbumSlider(t){const e=Math.ceil(Number(t.pagination.total)/Number(t.count));let a='<li class="page-item active"><a class="page-link" href="#portfolio">1</a></li>';for(let t=2;t<e+1;t++)a+=`<li class="page-item"><a class="page-link" href="#portfolio">${t}</a></li>`;this.pageSlider.innerHTML=a}setCurrentSlider(t){for(let e=0;e<this.pageSlider.childElementCount;e++)this.pageSlider.childNodes[e].textContent==t.textContent?this.pageSlider.childNodes[e].className="page-item active":this.pageSlider.childNodes[e].className="page-item"}setAlbumDetailsToUI(t){const e=document.getElementById("portfolio").firstElementChild;let a="",n="";if(t.album_images){a=`\n            <div class="carousel-item active">\n            <img src="http://localhost:5000/uploads/album/${t.album_images[0]}" class="d-block w-100" style="max-height: 500px !important;\n            max-width: auto !important;alt="...">\n            </div>\n            `;for(let e=1;e<t.album_images.length;e++)a+=`\n                <div class="carousel-item">\n                <img src="http://localhost:5000/uploads/album/${t.album_images[e]}" class="d-block w-100"style="max-height: 500px !important;\n                max-width: auto!important; alt="...">\n                </div>\n                `}t.videoUrl.length&&(n=`\n            <iframe width="560" height="315" src="${t.videoUrl[0]}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n          `);let l=`\n        <div class = "mt-3" id = "backToAlbums">\n            <a href = "http://localhost:3200/index.html"><i class="fa-sharp fa-solid fa-circle-chevron-left fa-3x" style = "color : #3D4D6A;"></i></a>        \n        </div>\n        <div class="column">\n        <div class = "portfolio-item-detail" style="width: 80%; margin-left: auto; margin-right: auto;">\n          <div class="col-lg-12 portfolio-item">\n            <div id="carouselExampleIndicators" class="carousel slide">\n              <div class="carousel-indicators">\n                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>\n                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>\n                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>\n              </div>\n              <div class="carousel-inner">\n                ${a}\n              </div>\n              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">\n                <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n                <span class="visually-hidden">Previous</span>\n              </button>\n              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">\n                <span class="carousel-control-next-icon" aria-hidden="true"></span>\n                <span class="visually-hidden">Next</span>\n              </button>\n            </div>\n          </div>\n          <div class="col-lg-12 portfolio-item" style = "width: 80%;">\n            ${n}\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-lg-12 portfolio-item about mt-5">\n            <div class="d-inline mx-auto">\n              <p style="position: relative; text-align: center; color : #3D4D6A; max-width:50rempx;word-wrap:break-word; font-size:2rem;">${t.title}</p>\n              <p style="position: relative; text-align: center; max-width:50rempx;word-wrap:break-word;">${t.content}</p>\n            </div>\n          </div>\n        </div>\n      </div>`;e.innerHTML=l}loginPageToUI(){document.getElementsByTagName("BODY")[0].innerHTML='\n\n         <div class = "mt-3" id = "backToAlbums" style = "margin-left: 10rem; margin-top: 20rem;";>\n            <a href = "http://localhost:3200/index.html"><i class="fa-sharp fa-solid fa-circle-chevron-left fa-3x" style = "color : #3D4D6A;"></i></a>        \n        </div>\n        <div style = "width:40vw; margin: auto; margin-top:10%">\n        <div>\n        \x3c!-- Pills content --\x3e\n        <div class="tab-content">\n        <div class="tab-pane fade show active" id="pills-login" role="tabpanel" aria-labelledby="tab-login">\n            <form>\n\n            \x3c!-- Email input --\x3e\n            <div class="form-outline mb-4">\n                <input type="email" id="loginName" class="form-control" />\n                <label class="form-label" for="loginName">Email</label>\n            </div>\n\n            \x3c!-- Password input --\x3e\n            <div class="form-outline mb-4">\n                <input type="password" id="loginPassword" class="form-control" />\n                <label class="form-label" for="loginPassword">Şifre</label>\n            </div>\n            </div>\n\n            \x3c!-- Submit button --\x3e\n            <button id= "login" type="submit" class="btn btn-primary btn-block mb-4">Giriş Yap</button>\n            </form>\n        </div>\n        \x3c!-- Pills content --\x3e\n        </div>\n        '}adminPanelToUI(){document.getElementsByTagName("BODY")[0].innerHTML='\n        <div class = "mt-3" id = "backToAlbums" style = "margin-left: 10rem; margin-top: 20rem;";>\n            <a href = "http://localhost:3200/index.html"><i class="fa-sharp fa-solid fa-circle-chevron-left fa-3x" style = "color : #3D4D6A;"></i></a>        \n        </div>\n        <div id="formElem" style = "width: 50%; margin: auto;">\n            <div class = "row">\n                <input type="text" id="title" placeholder="title" class = "m-2">\n                <textarea type="text" id="content" placeholder="content" class = "m-2" style = "height: 25rem;"></textarea>\n                <input type="text" id="video" placeholder="youtube embed link" class = "m-2">\n                <div>\n                Fotoğraflar: <input id="images" type="file" accept="image/jpeg, image/png, image/jpg" multiple class = "m-2">\n                </div>\n                <input type="submit" name="addItem" class = "d-block m-2" class = "col-6">\n            </div>\n        </div>\n        '}displayMessages(t,e){const a=document.getElementById("pills-login"),n=document.createElement("div");n.className=`alert alert-${e}`,n.textContent=t,a.appendChild(n),setTimeout((function(){n.remove()}),1e5)}};let o;document.addEventListener("DOMContentLoaded",(function(){l.get("album/?page=1").then((t=>{i.addAllAlbumToUI(t),i.addAlbumSlider(t),o=t})).catch((t=>console.log(t)))})),e.addEventListener("click",(function(t){l.get("album/?page="+Number(t.target.textContent)).then((e=>{i.addAllAlbumToUI(e),i.setCurrentSlider(t.target),o=e,console.log(o)})).catch((t=>console.log(t)))})),t.addEventListener("click",(function(t){t.target.textContent&&o&&o.data.forEach((e=>{e.title===t.target.textContent&&(i.setAlbumDetailsToUI(e),window.location="#portfolio")}))})),a.addEventListener("click",(function(t){"Giriş"===t.target.textContent&&i.loginPageToUI()})),n.addEventListener("click",(function(t){if("Giriş Yap"===t.target.textContent){const t=document.getElementById("loginName"),e=document.getElementById("loginPassword");let a="auth/login",n={email:t.value.trim().toString(),password:e.value.trim().toString()};l.post(n,a).then((t=>{t.succes?(document.cookie="access_token: "+t.acces_token,i.adminPanelToUI()):i.displayMessages(t.message,"warning")})).catch((t=>console.log(t)))}})),n.addEventListener("click",(function(t){if("addItem"===t.target.name){const t=document.getElementById("title"),n=document.getElementById("content"),l=document.getElementById("video"),i=document.getElementById("images");var e=new Headers;e.append("Authorization","Bearer: "+document.cookie.split(":")[1].trim());var a=new FormData;for(let t=0;t<i.files.length;t++)a.append("album_images",i.files[t]);a.append("title",t.value),a.append("content",n.value),a.append("videoUrl",l.value),fetch("https://ucankaravan-api-production.up.railway.app/api/album/addalbum",{method:"POST",headers:e,body:a,redirect:"follow"}).then((t=>t.text())).then((t=>console.log(t))).catch((t=>console.log("error",t)))}}))})();